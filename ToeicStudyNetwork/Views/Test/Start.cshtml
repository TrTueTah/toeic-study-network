@model ToeicStudyNetwork.Models.TakeTestModel
@{
  ViewBag.Title = @Model.Title;
  Layout = "_Layout";
}

@section customHead {
  <link rel="stylesheet" href="~/css/test_start.css" asp-append-version="true" />
  <link rel="stylesheet" href="https://cdn.plyr.io/3.6.12/plyr.css" />
}

<section class="start">
  <div class="xl-container">
    <!-- Header -->
    <div class="header" style="background-color: transparent">
      <h1 class="text-center" id="new-economy-toeic-test-1-thoát">
        New Economy TOEIC Test 1

        <a type="button" class="btn btn-sky btn-sm" href="/tests/224/new-economy-toeic-test-1/">Thoát</a>
      </h1>
    </div>

    <!-- Main Content -->
    <div class="test-wrapper" style="position: relative">
      <div class="test-content contentblock" id="test-content">
        <div class="context-wrapper">
          <div class="context-content context-audio">
            <div tabindex="0" class="plyr plyr--full-ui plyr--audio plyr--html5 plyr--paused plyr--stopped">
              <audio id="player" controls>
                <source src="~/assets/audio/Test_01.mp3" type="audio/mp3" />
              </audio>
            </div>
          </div>
        </div>

        <ul class="nav nav-pills nav-horizontal mb-4" id="testTabs" role="tablist">
          @foreach (var part in Model.PartQuestions)
          {
          <li class="nav-item" role="presentation">
            <a class="nav-link @(part.Key == 1 ? "active" : "")" id="part@(part.Key)-tab" data-bs-toggle="tab" data-bs-target="#part@(part.Key)" type="button" asp-controller="Test">
              Part @(part.Key)
            </a>
          </li>
          }
        </ul>
        
        <!-- Question -->
        <div class="tab-content" id="pills-tabContent">
          @foreach (var part in Model.PartQuestions)
          {
          <div class="tab-pane @(part.Key == 1 ? "active show" : "")" id="part@(part.Key)" role="tabpanel" aria-labelledby="part@(part.Key)-tab">
            <div class="test-questions-wrapper">
              @foreach (var question in part.Value)
              {
              <div class="question-group-wrapper">
                @* <div class="context-wrapper"> *@
                @*   <div class="context-content context-image"> *@
                @*     <img class="lazyel entered loaded" src="https://s4-media1.study4.com/media/tez_media/img/eco_toeic_1000_test_1_eco_toeic_1000_test_1_1.png" /> *@
                @*   </div> *@
                @* </div> *@
                <div class="question-wrapper" data-qid="@(question.QuestionNumber)" id="question-wrapper-@(question.QuestionNumber)">
                  <div class="question-number" data-qid="@(question.QuestionNumber)" data-markable="true">
                    <strong>@(question.QuestionNumber)</strong>
                  </div>
                  <div class="question-content text-highlightable">
                    <div class="question-text">
                      @question.Title
                    </div>
                    <div class="question-answers">
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="question-@(question.QuestionNumber)" id="question-@(question.QuestionNumber)-A" value="A"/>
                        <label class="form-check-label" for="question-@(question.QuestionNumber)-A">
                          A. @question.AnswerA
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="question-@(question.QuestionNumber)" id="question-@(question.QuestionNumber)-B" value="B"/>
                        <label class="form-check-label" for="question-@(question.QuestionNumber)-B">
                          B. @question.AnswerB
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="question-@(question.QuestionNumber)" id="question-@(question.QuestionNumber)-C" value="C"/>
                        <label class="form-check-label" for="question-@(question.QuestionNumber)-C">
                          C. @question.AnswerC
                        </label>
                      </div>
                      <div class="form-check">
                        <input class="form-check-input" type="radio" name="question-@(question.QuestionNumber)" id="question-@(question.QuestionNumber)-D" value="D"/>
                        <label class="form-check-label" for="question-@(question.QuestionNumber)-D">
                          D. @question.AnswerD
                        </label>
                      </div>
                    </div>
                  </div>
                </div>
              </div>
              }
            </div>
          </div>
          }
        </div>
      </div>

      <!-- Right Sidebar -->
      <div class="test-navigation" id="test-navigation">
        <div class="test-navigation__inner" id="test-navigation__inner">
          <div>
            <div class="timeleft-wrapper mb-2">
              Thời gian còn lại:
              <span data-totaltime="120.0" data-timeleft-value="118.3" id="timeleft" class="timeleft">118:18</span>
            </div>

            <button class="btn btn-outline-primary btn-block mb-3 mt-3" id="submit-test">
              NỘP BÀI
            </button>

            <div class="test-questions-list">
              <div class="test-questions-list-part">
                <h6 id="part-1">Part 1</h6>
                <div class="test-questions-list-wrapper">
                  @for (var i = 0; i < 6; i++)
                  {
                    <span class="test-questions-listitem" data-qid="8592" id="test-questions-lisitem-8592">
                      @(i + 1)
                    </span>
                  }
                </div>
              </div>

              <div class="test-questions-list-part">
                <h6 id="part-2">Part 2</h6>
                <div class="test-questions-list-wrapper">
                  @for (var i = 6; i < 31; i++)
                  {
                    <span class="test-questions-listitem" data-qid="8592" id="test-questions-lisitem-8592">
                      @(i + 1)
                    </span>
                  }
                </div>
              </div>

              <div class="test-questions-list-part">
                <h6 id="part-3">Part 3</h6>
                <div class="test-questions-list-wrapper">
                  @for (var i = 31; i < 70; i++)
                  {
                    <span class="test-questions-listitem" data-qid="8592" id="test-questions-lisitem-8592">
                      @(i + 1)
                    </span>
                  }
                </div>
              </div>

              <div class="test-questions-list-part">
                <h6 id="part-4">Part 4</h6>
                <div class="test-questions-list-wrapper">
                  @for (var i = 70; i < 100; i++)
                  {
                    <span class="test-questions-listitem" data-qid="8592" id="test-questions-lisitem-8592">
                      @(i + 1)
                    </span>
                  }
                </div>
              </div>

              <div class="test-questions-list-part">
                <h6 id="part-5">Part 5</h6>
                <div class="test-questions-list-wrapper">
                  @for (var i = 100; i < 130; i++)
                  {
                    <span class="test-questions-listitem" data-qid="8592" id="test-questions-lisitem-8592">
                      @(i + 1)
                    </span>
                  }
                </div>
              </div>

              <div class="test-questions-list-part">
                <h6 id="part-6">Part 6</h6>
                <div class="test-questions-list-wrapper">
                  @for (var i = 130; i < 146; i++)
                  {
                    <span class="test-questions-listitem" data-qid="8592" id="test-questions-lisitem-8592">
                      @(i + 1)
                    </span>
                  }
                </div>
              </div>

              <div class="test-questions-list-part">
                <h6 id="part-7">Part 7</h6>
                <div class="test-questions-list-wrapper">
                  @for (var i = 146; i < 200; i++)
                  {
                    <span class="test-questions-listitem" data-qid="8592" id="test-questions-lisitem-8592">
                      @(i + 1)
                    </span>
                  }
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>
  </div>
</section>

<script src="~/js/test_start.js" asp-append-version="true"></script>
<script src="https://cdn.plyr.io/3.7.8/plyr.js"></script>
<script>
  const controls = [
    'play', 'progress', 'current-time', 'duration', 'mute', 'volume'
  ];

  const player = new Plyr('#player', {
    controls: controls,
    loop: {     
      active: true,
    },
  });
</script>
