@model List<ExamModel>
@{
    ViewBag.Title = "Trang ch·ªß";
    Layout = "_LayoutAdmin";
}

@section customHead {
    <link rel="stylesheet" href="~/css/admin_index.css" asp-append-version="true" />
    <link rel="stylesheet" href="~/css/site.css" asp-append-version="true" />
}

<div class="container welcome-page-container">
    <h1 class="welcome-title">Ch√†o m·ª´ng b·∫°n ƒë·∫øn v·ªõi StuX</h1>
    <div class="welcome-header-container d-flex justify-content-between align-items-center">
        <span class="welcome-header-text">Danh s√°ch ƒë·ªÅ thi c·ªßa b·∫°n</span>
    </div>

    <div class="action-container d-flex align-items-center justify-content-between py-3">
        <button id="create-new-test" class="create-new-test-button" type="button">
            <i class="fas fa-plus me-2"></i> 
            <span class="create-new-test-text">T·∫°o m·ªõi</span>
        </button>

        <div class="dropdown filter-dropdown">
            <button class="btn btn-primary dropdown-toggle" type="button" id="filterDropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                G·∫ßn ƒë√¢y nh·∫•t
            </button>
            <ul class="dropdown-menu" aria-labelledby="filterDropdown">
                <li><a class="dropdown-item" href="#" data-value="recent">G·∫ßn ƒë√¢y nh·∫•t</a></li>
                <li><a class="dropdown-item" href="#" data-value="title">Ti√™u ƒë·ªÅ</a></li>
            </ul>
        </div>
    </div>
    <div id="test-list-container" class="test-list-container">
        @foreach (var exam in Model)
        {
            <div class="test-card" onclick="window.location.href='@Url.Action("CreateTest", "Admin", new { examId = exam.Id })'">
                <div class="test-card-box" aria-labelledby="test-card-title-@exam.Id">
                    <div class="test-card-box-icon">üìú</div>
                    <div class="test-action-button">
                        <div type="button" id="filterDropdown" data-bs-toggle="dropdown" aria-haspopup="true" aria-expanded="false">
                            <i class="fa fa-ellipsis-v"></i>
                        </div>
                        <ul class="dropdown-menu" aria-labelledby="filterDropdown">
                            <li><a class="dropdown-item" href="#">
                                    <i class="far fa-trash-alt me-2"></i>Xo√°</a>
                            </li>
                            <li><a class="dropdown-item" href="#">
                                    <i class="far fa-edit me-2"></i>Ch·ªânh s·ª≠a ti√™u ƒë·ªÅ</a>
                            </li>
                        </ul>
                    </div>
                </div>
                <div class="test-card-title-container">
                    <span class="test-card-title" id="test-card-title-@exam.Id}">@exam.Title</span>
                </div>
                <div class="test-card-subtitle">
                    <span class="test-card-subtitle-part">@exam.CreatedAt.ToLocalTime()</span>
                    <span class="test-card-subtitle-middle-dot">¬∑</span>
                    <span class="test-card-subtitle-part">@exam.ExamSeries.Name</span>
                </div>
            </div>
        }
    </div>
    
    <div class="modal fade" id="createTestModal" tabindex="-1" aria-labelledby="createTestModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="createTestModalLabel">T·∫°o ƒë·ªÅ thi m·ªõi</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="createTestForm">
                        <div class="mb-3">
                            <label for="testName" class="form-label">T√™n ƒë·ªÅ thi</label>
                            <input type="text" class="form-control test-name-input" id="testName" placeholder="Nh·∫≠p t√™n ƒë·ªÅ thi" required aria-describedby="testNameHelp">
                        </div>
                        <div class="mb-3">
                            <label for="testTypeDropdown" class="form-label">Lo·∫°i ƒë·ªÅ thi</label>
                            <div class="d-flex align-items-center gap-2">
                                <div class="dropdown test-type-dropdown">
                                    <button class="btn btn-primary dropdown-toggle" type="button" id="testTypeDropdown" data-bs-toggle="dropdown" aria-expanded="false">
                                        Ch·ªçn lo·∫°i ƒë·ªÅ thi
                                    </button>
                                    <ul class="dropdown-menu" id="testTypeDropdownMenu" aria-labelledby="testTypeDropdown">
                                    </ul>
                                </div>
                                <button type="button" class="btn btn-primary create-new-test-type-button" id="addTestTypeBtn"
                                        data-bs-toggle="tooltip" title="Th√™m lo·∫°i ƒë·ªÅ thi m·ªõi">
                                    <i class="fas fa-plus"></i>
                                </button>
                            </div>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                    <button type="button" class="btn btn-primary" id="saveTestBtn">T·∫°o</button>
                </div>
            </div>
        </div>
    </div>

    <div class="modal fade" id="addTestTypeModal" tabindex="-1" aria-labelledby="addTestTypeModalLabel" aria-hidden="true">
        <div class="modal-dialog">
            <div class="modal-content">
                <div class="modal-header">
                    <h5 class="modal-title" id="addTestTypeModalLabel">Th√™m lo·∫°i ƒë·ªÅ thi m·ªõi</h5>
                    <button type="button" class="btn-close" data-bs-dismiss="modal" aria-label="Close"></button>
                </div>
                <div class="modal-body">
                    <form id="addTestTypeForm">
                        <div class="mb-3">
                            <label for="newTestType" class="form-label">T√™n lo·∫°i ƒë·ªÅ thi</label>
                            <input type="text" class="form-control test-name-input" id="newTestType" placeholder="Nh·∫≠p t√™n lo·∫°i ƒë·ªÅ thi" required>
                        </div>
                    </form>
                </div>
                <div class="modal-footer">
                    <button type="button" class="btn btn-secondary" data-bs-dismiss="modal">H·ªßy</button>
                    <button type="button" class="btn btn-primary" id="saveTestTypeBtn">L∆∞u</button>
                </div>
            </div>
        </div>
    </div>

</div>


@section scripts {
    <script src="~/js/admin_index.js" asp-append-version="true"></script>
    <script>
    var tooltipTriggerList = [].slice.call(document.querySelectorAll('[data-bs-toggle="tooltip"]'))
    var tooltipList = tooltipTriggerList.map(function (tooltipTriggerEl) {
        return new bootstrap.Tooltip(tooltipTriggerEl)
    });
</script>
}
